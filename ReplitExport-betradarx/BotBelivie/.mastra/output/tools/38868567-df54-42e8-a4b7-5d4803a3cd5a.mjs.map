{"version":3,"file":"38868567-df54-42e8-a4b7-5d4803a3cd5a.mjs","sources":["../../../src/mastra/tools/getFixtureStats.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\nimport axios from \"axios\";\n\nexport const getFixtureStats = createTool({\n  id: \"get-fixture-stats\",\n  description: \"Retrieves detailed statistics for a specific football match\",\n  \n  inputSchema: z.object({\n    fixtureId: z.number().describe(\"The ID of the football match\"),\n  }),\n  \n  outputSchema: z.object({\n    stats: z.array(z.any()),\n    success: z.boolean(),\n    error: z.string().optional(),\n  }),\n  \n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info(\"üîß [getFixtureStats] Starting execution\", {\n      fixtureId: context.fixtureId,\n    });\n    \n    const apiKey = process.env.API_FOOTBALL_KEY;\n    if (!apiKey) {\n      logger?.error(\"‚ùå [getFixtureStats] API_FOOTBALL_KEY not found\");\n      return {\n        stats: [],\n        success: false,\n        error: \"API_FOOTBALL_KEY not configured\",\n      };\n    }\n    \n    try {\n      const url = `https://v3.football.api-sports.io/fixtures/statistics?fixture=${context.fixtureId}`;\n      logger?.info(\"üì° [getFixtureStats] Calling API-Football\", { url });\n      \n      const response = await axios.get(url, {\n        headers: { \"x-apisports-key\": apiKey },\n        timeout: 15000,\n      });\n      \n      if (response.status !== 200) {\n        logger?.error(\"‚ùå [getFixtureStats] API returned non-200 status\", {\n          status: response.status,\n        });\n        return {\n          stats: [],\n          success: false,\n          error: `API returned status ${response.status}`,\n        };\n      }\n      \n      const stats = response.data.response || [];\n      logger?.info(\"‚úÖ [getFixtureStats] Successfully fetched stats\", {\n        statsCount: stats.length,\n      });\n      \n      return {\n        stats,\n        success: true,\n      };\n    } catch (error: any) {\n      logger?.error(\"‚ùå [getFixtureStats] Error fetching stats\", {\n        error: error.message,\n      });\n      \n      return {\n        stats: [],\n        success: false,\n        error: error.message || \"Unknown error occurred\",\n      };\n    }\n  },\n});\n"],"names":[],"mappings":";;;;AAIO,MAAM,kBAAkB,UAAA,CAAW;AAAA,EACxC,EAAA,EAAI,mBAAA;AAAA,EACJ,WAAA,EAAa,6DAAA;AAAA,EAEb,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,SAAA,EAAW,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,8BAA8B;AAAA,GAC9D,CAAA;AAAA,EAED,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,KAAA,EAAO,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,KAAK,CAAA;AAAA,IACtB,OAAA,EAAS,EAAE,OAAA,EAAQ;AAAA,IACnB,KAAA,EAAO,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAAS,GAC5B,CAAA;AAAA,EAED,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AACtC,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,gDAAA,EAA2C;AAAA,MACtD,WAAW,OAAA,CAAQ;AAAA,KACpB,CAAA;AAED,IAAA,MAAM,MAAA,GAAS,QAAQ,GAAA,CAAI,gBAAA;AAC3B,IAAA,IAAI,CAAC,MAAA,EAAQ;AACX,MAAA,MAAA,EAAQ,MAAM,qDAAgD,CAAA;AAC9D,MAAA,OAAO;AAAA,QACL,OAAO,EAAC;AAAA,QACR,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO;AAAA,OACT;AAAA,IACF;AAEA,IAAA,IAAI;AACF,MAAA,MAAM,GAAA,GAAM,CAAA,8DAAA,EAAiE,OAAA,CAAQ,SAAS,CAAA,CAAA;AAC9F,MAAA,MAAA,EAAQ,IAAA,CAAK,kDAAA,EAA6C,EAAE,GAAA,EAAK,CAAA;AAEjE,MAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAA,CAAI,GAAA,EAAK;AAAA,QACpC,OAAA,EAAS,EAAE,iBAAA,EAAmB,MAAA,EAAO;AAAA,QACrC,OAAA,EAAS;AAAA,OACV,CAAA;AAED,MAAA,IAAI,QAAA,CAAS,WAAW,GAAA,EAAK;AAC3B,QAAA,MAAA,EAAQ,MAAM,sDAAA,EAAmD;AAAA,UAC/D,QAAQ,QAAA,CAAS;AAAA,SAClB,CAAA;AACD,QAAA,OAAO;AAAA,UACL,OAAO,EAAC;AAAA,UACR,OAAA,EAAS,KAAA;AAAA,UACT,KAAA,EAAO,CAAA,oBAAA,EAAuB,QAAA,CAAS,MAAM,CAAA;AAAA,SAC/C;AAAA,MACF;AAEA,MAAA,MAAM,KAAA,GAAQ,QAAA,CAAS,IAAA,CAAK,QAAA,IAAY,EAAC;AACzC,MAAA,MAAA,EAAQ,KAAK,qDAAA,EAAkD;AAAA,QAC7D,YAAY,KAAA,CAAM;AAAA,OACnB,CAAA;AAED,MAAA,OAAO;AAAA,QACL,KAAA;AAAA,QACA,OAAA,EAAS;AAAA,OACX;AAAA,IACF,SAAS,KAAA,EAAY;AACnB,MAAA,MAAA,EAAQ,MAAM,+CAAA,EAA4C;AAAA,QACxD,OAAO,KAAA,CAAM;AAAA,OACd,CAAA;AAED,MAAA,OAAO;AAAA,QACL,OAAO,EAAC;AAAA,QACR,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO,MAAM,OAAA,IAAW;AAAA,OAC1B;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;;"}