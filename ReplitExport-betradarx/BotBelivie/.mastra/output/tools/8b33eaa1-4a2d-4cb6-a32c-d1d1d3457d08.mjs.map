{"version":3,"file":"8b33eaa1-4a2d-4cb6-a32c-d1d1d3457d08.mjs","sources":["../../../src/mastra/tools/fetchLiveFixtures.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\nimport axios from \"axios\";\n\nexport const fetchLiveFixtures = createTool({\n  id: \"fetch-live-fixtures\",\n  description: \"Fetches all currently live football matches from API-Football\",\n  \n  inputSchema: z.object({}),\n  \n  outputSchema: z.object({\n    fixtures: z.array(z.any()),\n    count: z.number(),\n    success: z.boolean(),\n    error: z.string().optional(),\n  }),\n  \n  execute: async ({ mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info(\"üîß [fetchLiveFixtures] Starting execution\");\n    \n    const apiKey = process.env.API_FOOTBALL_KEY;\n    if (!apiKey) {\n      logger?.error(\"‚ùå [fetchLiveFixtures] API_FOOTBALL_KEY not found in environment\");\n      return {\n        fixtures: [],\n        count: 0,\n        success: false,\n        error: \"API_FOOTBALL_KEY not configured\",\n      };\n    }\n    \n    try {\n      const url = \"https://v3.football.api-sports.io/fixtures?live=all\";\n      logger?.info(\"üì° [fetchLiveFixtures] Calling API-Football\", { url });\n      \n      const response = await axios.get(url, {\n        headers: { \"x-apisports-key\": apiKey },\n        timeout: 15000,\n      });\n      \n      if (response.status !== 200) {\n        logger?.error(\"‚ùå [fetchLiveFixtures] API returned non-200 status\", {\n          status: response.status,\n          data: response.data,\n        });\n        return {\n          fixtures: [],\n          count: 0,\n          success: false,\n          error: `API returned status ${response.status}`,\n        };\n      }\n      \n      const fixtures = response.data.response || [];\n      logger?.info(\"‚úÖ [fetchLiveFixtures] Successfully fetched fixtures\", {\n        count: fixtures.length,\n      });\n      \n      return {\n        fixtures,\n        count: fixtures.length,\n        success: true,\n      };\n    } catch (error: any) {\n      logger?.error(\"‚ùå [fetchLiveFixtures] Error fetching fixtures\", {\n        error: error.message,\n        stack: error.stack,\n      });\n      \n      return {\n        fixtures: [],\n        count: 0,\n        success: false,\n        error: error.message || \"Unknown error occurred\",\n      };\n    }\n  },\n});\n"],"names":[],"mappings":";;;;AAIO,MAAM,oBAAoB,UAAA,CAAW;AAAA,EAC1C,EAAA,EAAI,qBAAA;AAAA,EACJ,WAAA,EAAa,+DAAA;AAAA,EAEb,WAAA,EAAa,CAAA,CAAE,MAAA,CAAO,EAAE,CAAA;AAAA,EAExB,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,QAAA,EAAU,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,KAAK,CAAA;AAAA,IACzB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,OAAA,EAAS,EAAE,OAAA,EAAQ;AAAA,IACnB,KAAA,EAAO,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAAS,GAC5B,CAAA;AAAA,EAED,OAAA,EAAS,OAAO,EAAE,MAAA,EAAO,KAAM;AAC7B,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,kDAA2C,CAAA;AAExD,IAAA,MAAM,MAAA,GAAS,QAAQ,GAAA,CAAI,gBAAA;AAC3B,IAAA,IAAI,CAAC,MAAA,EAAQ;AACX,MAAA,MAAA,EAAQ,MAAM,sEAAiE,CAAA;AAC/E,MAAA,OAAO;AAAA,QACL,UAAU,EAAC;AAAA,QACX,KAAA,EAAO,CAAA;AAAA,QACP,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO;AAAA,OACT;AAAA,IACF;AAEA,IAAA,IAAI;AACF,MAAA,MAAM,GAAA,GAAM,qDAAA;AACZ,MAAA,MAAA,EAAQ,IAAA,CAAK,oDAAA,EAA+C,EAAE,GAAA,EAAK,CAAA;AAEnE,MAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAA,CAAI,GAAA,EAAK;AAAA,QACpC,OAAA,EAAS,EAAE,iBAAA,EAAmB,MAAA,EAAO;AAAA,QACrC,OAAA,EAAS;AAAA,OACV,CAAA;AAED,MAAA,IAAI,QAAA,CAAS,WAAW,GAAA,EAAK;AAC3B,QAAA,MAAA,EAAQ,MAAM,wDAAA,EAAqD;AAAA,UACjE,QAAQ,QAAA,CAAS,MAAA;AAAA,UACjB,MAAM,QAAA,CAAS;AAAA,SAChB,CAAA;AACD,QAAA,OAAO;AAAA,UACL,UAAU,EAAC;AAAA,UACX,KAAA,EAAO,CAAA;AAAA,UACP,OAAA,EAAS,KAAA;AAAA,UACT,KAAA,EAAO,CAAA,oBAAA,EAAuB,QAAA,CAAS,MAAM,CAAA;AAAA,SAC/C;AAAA,MACF;AAEA,MAAA,MAAM,QAAA,GAAW,QAAA,CAAS,IAAA,CAAK,QAAA,IAAY,EAAC;AAC5C,MAAA,MAAA,EAAQ,KAAK,0DAAA,EAAuD;AAAA,QAClE,OAAO,QAAA,CAAS;AAAA,OACjB,CAAA;AAED,MAAA,OAAO;AAAA,QACL,QAAA;AAAA,QACA,OAAO,QAAA,CAAS,MAAA;AAAA,QAChB,OAAA,EAAS;AAAA,OACX;AAAA,IACF,SAAS,KAAA,EAAY;AACnB,MAAA,MAAA,EAAQ,MAAM,oDAAA,EAAiD;AAAA,QAC7D,OAAO,KAAA,CAAM,OAAA;AAAA,QACb,OAAO,KAAA,CAAM;AAAA,OACd,CAAA;AAED,MAAA,OAAO;AAAA,QACL,UAAU,EAAC;AAAA,QACX,KAAA,EAAO,CAAA;AAAA,QACP,OAAA,EAAS,KAAA;AAAA,QACT,KAAA,EAAO,MAAM,OAAA,IAAW;AAAA,OAC1B;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;;"}